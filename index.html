<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Brotrezept-Editor</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">

    <!-- Rezeptname -->
    <div class="itenm-head">
      <label for="rezeptname">Name</label>
      <input type="text" id="rezeptname" />
    </div>
    
    <!-- Hauptkonfiguration -->
    <fieldset class="fieldset-sidebar itenm-side">
      <legend>Hauptkonfiguration</legend>
      <div>
        
        <label for="teigeinlage">Teigeinlage in Gramm</label>
        <input type="number" id="teigeinlage" />
        <br>
        <br>
        <label>Anzahl Brote</label>
        <input type="number" />
        <br>
        <br>
          <label>Teigausbeute</label>
          <input type="number" id="teigausbeute" />
        <br>
        <br>
        <label for="fuehrung">Führung</label>
        <select id="fuehrung">
          <option>Detmolder Einstufenführung</option>
          <option selected>Detmolder Zweistufenführung</option>
          <option>Mohnheimer Salzsauer</option>
        </select>
        <br>
        <br>
        <label for="roggenanteil">Roggen in %</label>
        <input type="number" id="roggenanteil" />
        <br>
        <br>
        <label for="versaeuerung">Versäuerung in %</label>
        <input type="number" id="versaeuerung" />
      </div>
        <br>
      <button class="right-panel">Berechnen</button>
    </fieldset>

    <!-- Infobereich -->
    <div class="itenm-main">
      <fieldset class="fieldset-design">
        <legend>Infos</legend>
        <div>Mehl gesamt:</div>
        <div id="mehl-gesamt">wird berechnet</div>
        <div>Wasser gesamt:</div>
        <div id="wasser-gesamt">wird berechnet</div>
        <div>Roggenmehl gesamt:</div>
        <div id="roggenmehl-gesamt">wird berechnet</div>
      </fieldset>

      <!-- Grundsauer (wird ein-/ausgeblendet) -->
      <fieldset class="fieldset-design" id="grundsauer">
        <legend>Grundsauer</legend>
        <div><input type="text" placeholder="Temperatur und Zeit" /></div>
        <div><input type="text" id="ta-gs" placeholder="TA z.B. 200" /></div>
        <div>Anstellgut:</div>
        <div id="gs-anstellgut">wird berechnet</div>
        <div>Roggenmehl:</div>
        <div id="gs-roggenmehl">wird berechnet</div>
        <div>Wasser:</div>
        <div id="gs-wasser">wird berechnet</div>
      </fieldset>

      <fieldset class="fieldset-design">
        <legend>Vollsauer</legend>
        <div><input type="text" placeholder="Temperatur und Zeit" /></div>
        <div><input type="text" id="ta-vs" placeholder="TA z.B. 260" /></div>
        <div id="vs-anstellgut-label">Anstellgut:</div>
        <div id="vs-anstellgut-wert">wird berechnet</div>
        <div>Roggenmehl:</div>
        <div id="vs-roggenmehl">wird berechnet</div>
        <div>Wasser:</div>
        <div id="vs-wasser">wird berechnet</div>
      

        <!-- Salzzeile (nur bei Mohnheimer sichtbar) -->
          <div id="zeile-salz-label">Salz:</div>
          <div id="zeile-salz-wert">wird berechnet</div>
        
      </fieldset>

      <!-- Mengen Hauptrezept -->
      <fieldset class="fieldset-design">
        <legend>Mengen Hauptrezept</legend>
        <div>Wasser Hauptrezept:</div>
        <div>wird berechnet</div>
        <div>Roggenmehl Hauptrezept:</div>
        <div>wird berechnet</div>
        <div>Weizenmehl Hauptrezept:</div>
        <div>wird berechnet</div>
      </fieldset>
    </div>

    <!-- Rezeptfelder -->
    <fieldset class="itenm-main2 fieldset-sidebar">
      <legend>Rezept</legend>
      <div class="rezept-bereich">
        <textarea class="rezept-links" placeholder="Rezeptbeschreibung"></textarea>
        <textarea class="rezept-rechts" placeholder="Berechnung / Hinweise"></textarea>
      </div>
    </fieldset>

    <!-- Buttons -->
    <div class="itenm-footer">
      <button>Rezept speichern</button>
      <button>Rezept laden</button>
      <button>Abbrechen</button>
    </div>

  </div>
  



<script>
  document.addEventListener("DOMContentLoaded", function () {
    const fuehrungSelect = document.getElementById("fuehrung");

    const grundsauer = document.getElementById("grundsauer");
    const vsAnstellgutLabel = document.getElementById("vs-anstellgut-label");
    const vsAnstellgutWert = document.getElementById("vs-anstellgut-wert"); // ← du solltest hier den ID-Namen im HTML anpassen!
    const zeileSalzLabel = document.getElementById("zeile-salz-label");
    const zeileSalzWert = document.getElementById("zeile-salz-wert");

function setVisible(el, sichtbar) {
  if (!el) return;
  if (sichtbar) {
    el.style.display = el.classList.contains("fieldset-design") ? "grid" : "block";
  } else {
    el.style.display = "none";
  }
}

    function aktualisiereSichtbarkeit() {
      const fuehrung = fuehrungSelect.value;

      // Grundsauer nur bei Zweistufenführung
      setVisible(grundsauer, fuehrung === "Detmolder Zweistufenführung");

      // Anstellgut nur bei Einstufen oder Mohnheimer sichtbar
      const zeigeAnstellgut = 
        fuehrung === "Detmolder Einstufenführung" || 
        fuehrung === "Mohnheimer Salzsauer";
      setVisible(vsAnstellgutLabel, zeigeAnstellgut);
      setVisible(vsAnstellgutWert, zeigeAnstellgut);

      // Salz nur bei Mohnheimer sichtbar
      const zeigeSalz = fuehrung === "Mohnheimer Salzsauer";
      setVisible(zeileSalzLabel, zeigeSalz);
      setVisible(zeileSalzWert, zeigeSalz);
    }

    fuehrungSelect.addEventListener("change", aktualisiereSichtbarkeit);
    aktualisiereSichtbarkeit(); // Initial beim Laden
  });


// berechnungen
document.querySelector(".right-panel").addEventListener("click", function () {
  const teigeinlage = parseFloat(document.getElementById("teigeinlage").value);
  const teigausbeute = parseFloat(document.getElementById("teigausbeute").value);
  const roggenanteil = parseFloat(document.getElementById("roggenanteil").value);
  const versaeuerung = parseFloat(document.getElementById("versaeuerung").value);

  if (isNaN(teigeinlage) || isNaN(teigausbeute) || isNaN(roggenanteil) || isNaN(versaeuerung)) {
    alert("Bitte gib gültige Werte für Teigeinlage, Teigausbeute, Roggenanteil und Versäuerung ein.");
    return;
  }

  // Gesamtmehl und Wasser
  const mehlGesamt = teigeinlage * 100 / teigausbeute;
  const wasserGesamt = teigeinlage - mehlGesamt;
  const roggenmehlGesamt = mehlGesamt * (roggenanteil / 100);

  // Versäuerung
  const zvrm = roggenmehlGesamt * (versaeuerung / 100);
  const grundsauerMehl = zvrm * 0.35;
  const vollsauerMehl = zvrm * 0.65;

  // Anstellgut im Grundsauer = 10 % von Grundsauer-Roggenmehl
  const anstellgutGrundsauer = grundsauerMehl * 0.10;


const taGrundsauer = parseFloat(document.getElementById("ta-gs").value);
let wasserGrundsauer = 0;
if (!isNaN(taGrundsauer) && taGrundsauer > 100) {
  wasserGrundsauer = grundsauerMehl * (taGrundsauer - 100) / 100;
}

const taVollsauer = parseFloat(document.getElementById("ta-vs").value);
let wasserVollsauer = 0;
if (!isNaN(taVollsauer) && taVollsauer > 100) {
  wasserVollsauer = vollsauerMehl * (taVollsauer - 100) / 100;
}



  // Anzeige aktualisieren
  document.getElementById("mehl-gesamt").textContent = `${mehlGesamt.toFixed(1)} g`;
  document.getElementById("wasser-gesamt").textContent = `${wasserGesamt.toFixed(1)} g`;
  document.getElementById("roggenmehl-gesamt").textContent = `${roggenmehlGesamt.toFixed(1)} g`;

  document.getElementById("gs-roggenmehl").textContent = `${grundsauerMehl.toFixed(1)} g`;
  document.getElementById("vs-roggenmehl").textContent = `${vollsauerMehl.toFixed(1)} g`;
  document.getElementById("gs-anstellgut").textContent = `${anstellgutGrundsauer.toFixed(1)} g`;
document.getElementById("gs-wasser").textContent = `${wasserGrundsauer.toFixed(1)} g`;
document.getElementById("vs-wasser").textContent = `${wasserVollsauer.toFixed(1)} g`;

});
</script>


</body>
</html>